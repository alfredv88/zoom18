<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Plantilla de invitaci√≥n a reuni√≥n -->
    <record id="email_template_meeting_invitation" model="mail.template">
        <field name="name">Invitaci√≥n a Reuni√≥n Zoom</field>
        <field name="model_id" ref="model_zoom_meeting_attendee"/>
        <field name="subject">Invitaci√≥n a Reuni√≥n: {{ object.meeting_id.name }}</field>
        <field name="email_from">{{ (object.meeting_id.create_uid.email_formatted or user.email_formatted) }}</field>
        <field name="email_to">{{ object.email }}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px; font-size: 13px;">
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Hola {{ object.name or 'Estimado/a' }},
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Te invitamos a participar en la siguiente reuni√≥n:
                </p>
                <br/>
                <div style="margin: 16px 0px 16px 0px; padding: 8px 16px 8px 16px; background-color: #f8f9fa; border-left: 4px solid #007bff;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Reuni√≥n:</strong> {{ object.meeting_id.name }}<br/>
                        <strong>Fecha y Hora:</strong> {{ object.meeting_id.start_time.strftime('%d/%m/%Y a las %H:%M') }}<br/>
                        <strong>Duraci√≥n:</strong> {{ object.meeting_id.duration }} minutos<br/>
                        {% if object.meeting_id.description %}
                        <strong>Descripci√≥n:</strong> {{ object.meeting_id.description }}<br/>
                        {% endif %}
                    </p>
                </div>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Para unirte a la reuni√≥n:</strong>
                </p>
                <ul style="margin: 0px; padding: 0px; font-size: 13px;">
                    <li><strong>URL de unirse:</strong> <a href="{{ object.meeting_id.join_url }}" style="color: #007bff;">{{ object.meeting_id.join_url }}</a></li>
                    <li><strong>Meeting ID:</strong> {{ object.meeting_id.meeting_id }}</li>
                    {% if object.meeting_id.password %}
                    <li><strong>Contrase√±a:</strong> {{ object.meeting_id.password }}</li>
                    {% endif %}
                </ul>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Por favor confirma tu asistencia:</strong>
                </p>
                <div style="margin: 16px 0px 16px 0px; text-align: center;">
                    <a href="{{ object.meeting_id.join_url }}?action=confirm" 
                       style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 5px;">
                        ‚úÖ Confirmar Asistencia
                    </a>
                    <a href="{{ object.meeting_id.join_url }}?action=decline" 
                       style="background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 5px;">
                        ‚ùå Rechazar Invitaci√≥n
                    </a>
                </div>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Si tienes alguna pregunta, no dudes en contactarnos.
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Saludos cordiales,<br/>
                    {{ object.meeting_id.create_uid.name or 'El equipo' }}
                </p>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>

    <!-- Plantilla de recordatorio de reuni√≥n -->
    <record id="email_template_meeting_reminder" model="mail.template">
        <field name="name">Recordatorio de Reuni√≥n Zoom</field>
        <field name="model_id" ref="model_zoom_meeting_attendee"/>
        <field name="subject">Recordatorio: Reuni√≥n en 1 hora - {{ object.meeting_id.name }}</field>
        <field name="email_from">{{ (object.meeting_id.create_uid.email_formatted or user.email_formatted) }}</field>
        <field name="email_to">{{ object.email }}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px; font-size: 13px;">
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Hola {{ object.name or 'Estimado/a' }},
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Recordatorio:</strong> Tienes una reuni√≥n programada en 1 hora.
                </p>
                <br/>
                <div style="margin: 16px 0px 16px 0px; padding: 8px 16px 8px 16px; background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Reuni√≥n:</strong> {{ object.meeting_id.name }}<br/>
                        <strong>Fecha y Hora:</strong> {{ object.meeting_id.start_time.strftime('%d/%m/%Y a las %H:%M') }}<br/>
                        <strong>Duraci√≥n:</strong> {{ object.meeting_id.duration }} minutos<br/>
                    </p>
                </div>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Para unirte a la reuni√≥n:</strong>
                </p>
                <ul style="margin: 0px; padding: 0px; font-size: 13px;">
                    <li><strong>URL de unirse:</strong> <a href="{{ object.meeting_id.join_url }}" style="color: #007bff;">{{ object.meeting_id.join_url }}</a></li>
                    <li><strong>Meeting ID:</strong> {{ object.meeting_id.meeting_id }}</li>
                </ul>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    ¬°Te esperamos en la reuni√≥n!
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Saludos cordiales,<br/>
                    {{ object.meeting_id.create_uid.name or 'El equipo' }}
                </p>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>

    <!-- Plantilla de confirmaci√≥n de asistencia -->
    <record id="email_template_attendance_confirmation" model="mail.template">
        <field name="name">Confirmaci√≥n de Asistencia</field>
        <field name="model_id" ref="model_zoom_meeting_attendee"/>
        <field name="subject">Asistencia Confirmada - {{ object.meeting_id.name }}</field>
        <field name="email_from">{{ (object.meeting_id.create_uid.email_formatted or user.email_formatted) }}</field>
        <field name="email_to">{{ object.email }}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px; font-size: 13px;">
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Hola {{ object.name or 'Estimado/a' }},
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>¬°Gracias por confirmar tu asistencia!</strong>
                </p>
                <br/>
                <div style="margin: 16px 0px 16px 0px; padding: 8px 16px 8px 16px; background-color: #d4edda; border-left: 4px solid #28a745;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Reuni√≥n:</strong> {{ object.meeting_id.name }}<br/>
                        <strong>Fecha y Hora:</strong> {{ object.meeting_id.start_time.strftime('%d/%m/%Y a las %H:%M') }}<br/>
                        <strong>Estado:</strong> ‚úÖ Asistencia Confirmada<br/>
                        <strong>Fecha de Confirmaci√≥n:</strong> {{ object.confirmation_date.strftime('%d/%m/%Y a las %H:%M') if object.confirmation_date else 'Reci√©n confirmado' }}
                    </p>
                </div>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Informaci√≥n de la reuni√≥n:</strong>
                </p>
                <ul style="margin: 0px; padding: 0px; font-size: 13px;">
                    <li><strong>URL de unirse:</strong> <a href="{{ object.meeting_id.join_url }}" style="color: #007bff;">{{ object.meeting_id.join_url }}</a></li>
                    <li><strong>Meeting ID:</strong> {{ object.meeting_id.meeting_id }}</li>
                </ul>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Te recordaremos la reuni√≥n 1 hora antes. ¬°Nos vemos pronto!
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Saludos cordiales,<br/>
                    {{ object.meeting_id.create_uid.name or 'El equipo' }}
                </p>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>

    <!-- Plantilla de notificaci√≥n al organizador -->
    <record id="email_template_organizer_notification" model="mail.template">
        <field name="name">Notificaci√≥n al Organizador</field>
        <field name="model_id" ref="model_zoom_meeting"/>
        <field name="subject">Actualizaci√≥n de Asistencia - {{ object.name }}</field>
        <field name="email_from">{{ (object.create_uid.email_formatted or user.email_formatted) }}</field>
        <field name="email_to">{{ object.create_uid.email_formatted }}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px; font-size: 13px;">
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Hola {{ object.create_uid.name }},
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Se ha actualizado la asistencia para tu reuni√≥n:
                </p>
                <br/>
                <div style="margin: 16px 0px 16px 0px; padding: 8px 16px 8px 16px; background-color: #e2e3e5; border-left: 4px solid #6c757d;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Reuni√≥n:</strong> {{ object.name }}<br/>
                        <strong>Fecha y Hora:</strong> {{ object.start_time.strftime('%d/%m/%Y a las %H:%M') }}<br/>
                        <strong>Total Invitados:</strong> {{ object.total_invited }}<br/>
                        <strong>Confirmados:</strong> {{ object.total_confirmed }}<br/>
                        <strong>Tasa de Asistencia:</strong> {{ object.attendance_rate }}%
                    </p>
                </div>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    <strong>Estado de los asistentes:</strong>
                </p>
                <ul style="margin: 0px; padding: 0px; font-size: 13px;">
                    {% for attendee in object.attendee_ids %}
                    <li>{{ attendee.name or attendee.email }} - 
                        {% if attendee.status == 'confirmed' %}
                        ‚úÖ Confirmado
                        {% elif attendee.status == 'declined' %}
                        ‚ùå Rechazado
                        {% elif attendee.status == 'attended' %}
                        üéØ Asisti√≥
                        {% else %}
                        ‚è≥ Pendiente
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Puedes gestionar la reuni√≥n desde Odoo: <a href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=zoom.meeting&amp;view_type=form" style="color: #007bff;">Ver Reuni√≥n</a>
                </p>
                <br/>
                <p style="margin: 0px; padding: 0px; font-size: 13px;">
                    Saludos,<br/>
                    Sistema de Notificaciones Zoom
                </p>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>
</odoo>
